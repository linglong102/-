---
layout: post
title: Centos6.6 ks
category: 自动化部署
tags: Pxe+kickstart
keywords: 基本自动化部署系统工具Cobbler，编写的centos6.6 ks文件
description: 
---

>**Data:2015/3/29 6:02:27**

###  适用于pxe+kickstart环境

	#platform=x86, AMD64, or Intel EM64T
	#version=DEVEL
	# Firewall configuration
	firewall --disabled
	# Install OS instead of upgrade
	install
	# Use network installation
	url --url="http://192.168.1.106/cobbler/ks_mirror/centos6.6-x86_64"
	# Root password
	rootpw --plaintext centos
	# System authorization information
	auth  --useshadow  --passalgo=sha512
	# Use text mode install
	text
	# System keyboard
	keyboard us
	# System language
	lang en_US
	# SELinux configuration
	selinux --disabled
	# Do not configure the X Window System
	skipx
	# Installation logging level
	logging --level=info
	# Reboot after installation
	reboot
	# System timezone
	timezone  Asia/Shanghai
	# Network information
	network  --bootproto=dhcp --onboot=on --noipv6
	# System bootloader configuration
	bootloader --location=mbr
	# Clear the Master Boot Record
	zerombr
	# Partition clearing information
	clearpart --all --initlabel
	# Disk partitioning information
	part /boot --fstype="ext4" --size=431
	part / --fstype="ext4" --size=18000
	part swap --fstype="swap" --size=2048

	%packages
	@base
	@console-internet
	@core
	@debugging
	@directory-client
	@hardware-monitoring
	@large-systems
	@network-file-system-client
	@performance
	@perl-runtime
	@server-platform
	@server-policy
	@workstation-policy
	pax
	oddjob
	sgpio
	device-mapper-persistent-data
	samba-winbind
	certmonger
	pam_krb5
	krb5-workstation
	perl-DBD-SQLite
	%end

	%post --interpreter /bin/bash
	IP=`ifconfig eth0 | grep inet | grep -v inet6 | awk -F[' ':]+ '{print $4}'`
	MASK=`ifconfig eth0 | grep inet | grep -v inet6 | awk -F[' ':]+ '{print $8}'`
	GATE=`route -n | grep UG | awk '{print $2}'`
	sed -i "s@\(^H.*=\).*@\1server-$IP@g" /etc/sysconfig/network
	sed -i "s@\(^BOOT.*=\).*@\1static@g" /etc/sysconfig/network-scripts/ifcfg-eth0
	echo "IPADDR=$IP" >> /etc/sysconfig/network-scripts/ifcfg-eth0
	echo "NETMASK=$MASK" >> /etc/sysconfig/network-scripts/ifcfg-eth0
	echo "GATEWAY=$GATE" >> /etc/sysconfig/network-scripts/ifcfg-eth0
	%end
